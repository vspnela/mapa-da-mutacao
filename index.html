<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Mapa da Mutação</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
  <style>
    html, body {
      height: 100%;
      margin: 0;
      font-family: 'Lato', sans-serif;
    }
    #map {
      height: 100%;
      width: 100%;
    }
    .info-window {
      font-family: 'Lato', sans-serif;
      max-width: 250px;
    }
    .info-window img {
      width: 100%;
      border-radius: 4px;
      cursor: zoom-in;
    }
    .info-window h3 {
      margin: 0.5em 0 0.2em 0;
    }
    .info-window p {
      margin-top: 0.8em;
      margin-bottom: 0.8em;
      font-size: 0.9em;
      text-align: justify;
    }

    /* Modal para imagem ampliada */
    #imageModal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.8);
      text-align: center;
      padding-top: 5%;
    }
    #modalImage {
      max-width: 90%;
      max-height: 90%;
      border: 4px solid white;
      border-radius: 8px;
    }
  </style>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCjfEIFGky6bRHXe3pqA64fpCU5o1WIxVg"></script>
  <script>
    function initMap() {
      const map = new google.maps.Map(document.getElementById("map"), {
        zoom: 5,
        center: { lat: -16.0, lng: -44.0 },
        styles: [
          { elementType: "geometry", stylers: [{ color: "#d9cbb1" }] },
          { elementType: "labels.text.fill", stylers: [{ color: "#5e4b3c" }] },
          { elementType: "labels.text.stroke", stylers: [{ color: "#f4f1e9" }] },
          { featureType: "administrative", elementType: "geometry", stylers: [{ color: "#b49f8d" }] },
          { featureType: "poi", elementType: "geometry", stylers: [{ color: "#c7b299" }] },
          { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6a186" }] },
          { featureType: "road", elementType: "geometry", stylers: [{ color: "#a58f77" }] },
          { featureType: "road.arterial", elementType: "geometry", stylers: [{ color: "#a89574" }] },
          { featureType: "road.highway", elementType: "geometry", stylers: [{ color: "#8d715a" }] },
          { featureType: "water", elementType: "geometry", stylers: [{ color: "#a3cfc7" }] },
          { featureType: "water", elementType: "labels.text.fill", stylers: [{ color: "#5e807f" }] }
        ]
      });

      const markersData = [
        {
          position: { lat: -25.4700, lng: -48.8330 },
          title: "Abelha-tiúba",
          icon: "https://i.imgur.com/rdylK2H.png",
          image: "https://i.imgur.com/Rv7e2Ne.jpeg",
          html: `<h3>Abelha-tiúba</h3>
          <p><strong>Habitat atual:</strong> Mata Atlântica úmida, com alta diversidade floral e colmeias instaladas em ocos de árvores.</p>
          <p><strong>Mudanças previstas:</strong> Redução de áreas florestadas, calor extremo, maior incidência de incêndios, uso intensivo de agrotóxicos, escassez de flores nativas.</p>
          <p><strong>Hábitos e anatomia:</strong> Abelha sem ferrão que vive em colônias sociais em ocos de árvores, com voo calmo e hábitos diurnos. Corpo pequeno, peludo, escuro com abdômen alaranjado, adaptada à polinização de plantas nativas da Mata Atlântica.</p>
          <p><strong>Adaptações especulativas:</strong> Genes de espécies de biomas áridos para suportar ambientes secos; edição genética para metabolizar agrotóxicos; sensor de florada com IA; chip com sistema GPS; biofiltros respiratórios branquiais; microbiota modificada para digerir novas fontes de néctar e pólen.</p>`
        },
        // ... outros marcadores continuam aqui ...
      ];

      markersData.forEach(data => {
        const marker = new google.maps.Marker({
          position: data.position,
          map,
          title: data.title,
          icon: {
            url: data.icon,
            scaledSize: new google.maps.Size(40, 55)
          }
        });

        const infoWindow = new google.maps.InfoWindow({
          content: `
            <div class="info-window">
              <img src="${data.image}" alt="${data.title}" onclick="openImageModal('${data.image}')" />
              ${data.html}
            </div>
          `
        });

        marker.addListener("click", () => {
          infoWindow.open(map, marker);
        });
      });
    }

    window.onload = initMap;

    function openImageModal(src) {
      document.getElementById("modalImage").src = src;
      document.getElementById("imageModal").style.display = "block";
    }

    window.addEventListener("click", function(e) {
      const modal = document.getElementById("imageModal");
      if (e.target === modal) {
        modal.style.display = "none";
      }
    });
  </script>
</head>
<body>
  <div id="map"></div>

  <!-- Modal de Imagem Ampliada -->
  <div id="imageModal">
    <img id="modalImage" src="" alt="Imagem ampliada" />
  </div>
</body>
</html>
